<html>
<head>
<title>Dywapitch test</title>
</head>
<body>
<h1>Dywapitch test</h1>
</body>
</html>
<script src="js/lib/dywapitch.js"></script>
<script>

var sampleCount = 2048;
var sampleRate = 44100;
var angularFreq = 1000 * 2 * Math.PI;
var increment = 1 / sampleRate;

var samples = new Float64Array(sampleCount);

for (var i = 0; i < sampleCount; i++) {
    samples[i] = Math.sin( angularFreq * (increment * i));
}

var trackerPtr = Module._malloc(12);
Module._dywapitch_inittracking(trackerPtr);

sampleNumBytes = samples.BYTES_PER_ELEMENT * samples.length;
var bufferPtr = Module._malloc(sampleNumBytes);
var heapBytes = new Uint8Array(Module.HEAPU8.buffer, bufferPtr, sampleNumBytes);
heapBytes.set(new Uint8Array(samples.buffer));
//Module.HEAPU8.set(samples, bufferPtr);

var result = Module._dywapitch_computepitch(trackerPtr, heapBytes.byteOffset, 0, sampleCount);
console.log(result);

</script>

